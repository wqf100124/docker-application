import{_ as s,o as a,c as n,O as e}from"./chunks/framework.4afe7240.js";const u=JSON.parse('{"title":"Linux 挂载数据盘","description":"","frontmatter":{},"headers":[],"relativePath":"question/disk.md","filePath":"question/disk.md"}'),l={name:"question/disk.md"},p=e(`<h1 id="linux-挂载数据盘" tabindex="-1">Linux 挂载数据盘 <a class="header-anchor" href="#linux-挂载数据盘" aria-label="Permalink to &quot;Linux 挂载数据盘&quot;">​</a></h1><h2 id="_1-显示当前分区情况" tabindex="-1">1.显示当前分区情况： <a class="header-anchor" href="#_1-显示当前分区情况" aria-label="Permalink to &quot;1.显示当前分区情况：&quot;">​</a></h2><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">fdisk</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-l</span></span></code></pre></div><ul><li>/dev/vdb - 数据盘，有两个分区vdb1,vdb2</li><li>/dev/vda - 系统盘，有一个分区vda1</li></ul><h2 id="_2-磁盘分区" tabindex="-1">2.磁盘分区 <a class="header-anchor" href="#_2-磁盘分区" aria-label="Permalink to &quot;2.磁盘分区&quot;">​</a></h2><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">fdisk</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/dev/vdb</span></span></code></pre></div><p>根据提示，依次输入 n、p、1，然后两次回车，然后 wq 保存并开始分区，这里根据实际情况，如果需要分区，则需要继续输入 n、p、* 的操作，其中 * 可以直接回车，无需手动输入</p><p>分区大小输入M、G等即可</p><h2 id="_3-格式化" tabindex="-1">3.格式化 <a class="header-anchor" href="#_3-格式化" aria-label="Permalink to &quot;3.格式化&quot;">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">mkfs.ext4 /dev/vdb1 或 mkfs -t ext4 /dev/vdb1</span></span>
<span class="line"><span style="color:#A6ACCD;">mkfs.ext4 /dev/vdb2</span></span>
<span class="line"><span style="color:#A6ACCD;">...</span></span>
<span class="line"><span style="color:#A6ACCD;">其它分区</span></span>
<span class="line"><span style="color:#A6ACCD;"># 注意：/dev/vda为系统盘，千万别输入错了</span></span></code></pre></div><p>按照界面的提示，依次输入“n”(新建分区)、“p”(新建扩展分区)、“1”(使用第1个主分区)，两次回车(使用默认配置)，输入“w”(保存分区表)，开始分区。</p><p>Last cylinder or +size or +sizeM or +sizeK (1-20805, default 20805):此处是设置分区结束柱面，+3G表示从起始柱面开始向后3G结束，也是是设置分区大小为3G</p><h2 id="_4-磁盘挂载与卸载" tabindex="-1">4.磁盘挂载与卸载 <a class="header-anchor" href="#_4-磁盘挂载与卸载" aria-label="Permalink to &quot;4.磁盘挂载与卸载&quot;">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;"># 创建目录</span></span>
<span class="line"><span style="color:#A6ACCD;">mkdir /mnt/software</span></span>
<span class="line"><span style="color:#A6ACCD;"># 挂载</span></span>
<span class="line"><span style="color:#A6ACCD;">mount /dev/vdb1 /mnt/software</span></span>
<span class="line"><span style="color:#A6ACCD;"># 查看</span></span>
<span class="line"><span style="color:#A6ACCD;">df -h</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"># 卸载 </span></span>
<span class="line"><span style="color:#A6ACCD;"># umount [-fn] 装置文件名或挂载点</span></span>
<span class="line"><span style="color:#A6ACCD;">umount /dev/vdb1</span></span></code></pre></div><blockquote><p>-f ：强制卸除！可用在类似网络文件系统 (NFS) 无法读取到的情况下；<br> -n ：不升级 /etc/mtab 情况下卸除。</p></blockquote><h2 id="_5-自动挂载数据盘" tabindex="-1">5.自动挂载数据盘 <a class="header-anchor" href="#_5-自动挂载数据盘" aria-label="Permalink to &quot;5.自动挂载数据盘&quot;">​</a></h2><p>如果希望云服务器在重启或开机时能自动挂载数据盘，必须将分区信息添加到/etc/fstab中。如果没有添加，则云服务器重启或开机后，都不能自动挂载数据盘。 请确认分区路径是否为 “/dev/vdb1”,若路径错误，将会造成云主机重启失败</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;"># 查看当前分区信息</span></span>
<span class="line"><span style="color:#A6ACCD;">cat /etc/fstab</span></span>
<span class="line"><span style="color:#A6ACCD;"># 编辑</span></span>
<span class="line"><span style="color:#A6ACCD;">vim /etc/fstab</span></span>
<span class="line"><span style="color:#A6ACCD;"># 在最后添加分区信息</span></span>
<span class="line"><span style="color:#A6ACCD;">/dev/vdb1 /mnt/project ext4 defaults 0 0</span></span>
<span class="line"><span style="color:#A6ACCD;">/dev/vdb2 /mnt/data ext4 defaults 0 0</span></span>
<span class="line"><span style="color:#A6ACCD;">...</span></span></code></pre></div><p>使用 <code>echo &#39;/dev/vdb1 /mydata ext3 defaults 0 0&#39; &gt;&gt; /etc/fstab</code> 命令添加分区信息后，使用 <code>cat /etc/fstab</code> 命令查看，出现以下信息表示添加分区信息成功。</p>`,19),t=[p];function o(c,i,r,d,C,h){return a(),n("div",null,t)}const y=s(l,[["render",o]]);export{u as __pageData,y as default};
